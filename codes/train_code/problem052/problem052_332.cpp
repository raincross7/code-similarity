#include <iostream>
#include <string>
using namespace std;

void print(string &str)//str???a???????????????b??????????????§?????????
{
	int a, b;
	cin >> a >> b;
	
	string copy_str;
	for(int i = a; i <= b; i++){
		copy_str += str[i];
	}
	cout << copy_str << endl;
}
string reverse(string &str)//str???a???????????????b??????????????§??????????????????
{
	int a, b;
	cin >> a >> b;
	
	string copy_str = str;
	for(int i = 0; i <= b - a; i++){
		copy_str[i + a] = str[b - i];
	}
	return copy_str;
}
string replace(string &str)//str???a???????????????b??????????????§???p??????????????????
{
	int a, b;
	cin >> a >> b;
	
	string p;
	cin >> p;
	
	for(int i = a; i <= b; i++){
		str[i] = p[i - a];
	}
	return str;
}
int main(void)
{
	string str;
	cin >> str;
	
	int q;//???????????°
	cin >> q;
	
	for(int i = 0; i < q; i++){
		
		string command;//?????????
		cin >> command;
		
		if(command == "print"){
			print(str);
		}
		else if(command == "reverse"){
			str =reverse(str);
		}
		else{
			str =replace(str);
		}
	}
	return 0;
}