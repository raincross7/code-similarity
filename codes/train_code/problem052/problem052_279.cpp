#include<iostream>
#include<string>
#include<vector>

//?????????????????????????????£???????????????
//?¨??????\???:?????????
//         ????????°
//         ????????? ?§???? ?????? (?????????)
std::string Reverse(std::string s, int a, int b){
	std::string S = s;
	for(int i = a; i <= b; i++) s[i] = S[a+b-i];
	return s;
}

std::string Replace(std::string s, int a, int b){
	std::string replace;
	std::cin >> replace;
	for(int i = a; i <= b; i++) s[i] = replace[i-a];
	return s;
}

void Manupulate(std::string& str)//?????§??????????????¨????????¢??°??§????????????????????????
{
	std::string order;
	std::cin >> order;
	int start, end;
	std::cin >> start >> end; //vector???????§??????????????????????
	if(order == "replace")
	{
		str = Replace(str, start , end);
		return;
	}
	if(order == "print")
	{
		std::cout << str.substr(start, end - start + 1) << std::endl;
		return;
	}
	if(order == "reverse")
	{
		str = Reverse(str, start, end);
		return;
	}
}

int main() //main??¢??°???20????¨??????§
{
	//?????????????????????
	std::string str;
	std::cin >> str;
	//???????????°????????????
	int q;
	std::cin >> q;
	//??????????????????????????????
	for(int i = 0; i < q; i++){
		Manupulate(str);
	}
//	system("pause");
	return 0;
}