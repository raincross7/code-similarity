#include<stdio.h>
#include<string.h>




int main(void){

	char str[1001];


	int q;

	char Q[101];


	int i;

	int a,b,m;


	scanf("%s",str);//??????????????£??\
	scanf("%d",&q);//?????°?????£??\

	for(i=0;i<q;i++){
	//	printf("??????????????\?????????????????????\n");
		scanf("%s",Q);

		if(strcmp(Q,"replace") == 0){

		//	printf("[replace]--a?????\?????????????????????\n");

			scanf(" %d",&a);

		//	printf("[replace]--b?????\?????????????????????\n");

			scanf(" %d",&b);
			m = (b-a)+1;
		//memcopy?????\??????

			
			char p[m];		
			
		

		//	printf("p?????\?????????????????????\n");

			scanf("%s",p);
			

			memcpy( a + str,p,m);

			

	//		printf("%s\n",str);

		}

		else if(strcmp(Q,"reverse") == 0){
			int s;
			int A=0;
			char re[1001];
			char tmp;
		
						
		
		//	printf("[reverse]--a?????\?????????????????????\n");

			scanf(" %d",&a);
			A = a;

		//	printf("[reverse]--b?????\?????????????????????\n");

			scanf(" %d",&b);

			strcpy(re,str);

		//	printf("str == [%s]\n",str);
		//	printf("re == [%s]\n",re);

			for(s = b;s > a;s--){
				
				tmp = re[A];
		//		printf("str[A] == [%c]?????????tmp \n",str[A]);



				str[A] = re[s];
		//		printf("str[s] == [%c] ???  str[A]  \n",str[s]);

				str[s] = tmp;
		//		printf("tmp == [%c] ???  str[s]  \n\n",tmp);
		//		printf("%s\n",str);

				A++;

			}
					
		//	printf("%s\n",str);

			
		/*	printf("str == [%s]\n",str);
			printf("re == [%s]\n",re);


			for(s = strlen(str) ;s >= 0; s--){
				
				str[] = re[s];

			}

		*/
		}

		else if(strcmp(Q,"print") == 0){
			int j;

		//	printf("[print]--a?????\?????????????????????\n");

			scanf(" %d",&a);

		//	printf("[print]--b?????\?????????????????????\n");

			scanf(" %d",&b);
			for(j=a;j <= b;j++){
			
				printf("%c",str[j]);

			}

			printf("\n");


//			printf("print ??????\n");


		}

	//	printf("i= %d  q = %d \n",i,q);

		//printf("for?????????\n");
	}

return 0;


}